<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>خط التماس الأخباري</title>

<!-- خط -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700;800&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@400;600&display=swap" rel="stylesheet" />

<style>
  :root{
    --bg:#f6f8fb; --card:#ffffff; --ink:#0a1020;
    --ring:#e5eef6; --shadow:0 10px 25px rgba(19,52,89,.08);
    --green1:#11c295; --green2:#0aa27a; --green3:#0a865f;
    --barH:8px;
  }
  body{margin:0; background:var(--bg); color:var(--ink);
       font:16px/1.75 "Cairo",system-ui,Arial,sans-serif}

  /* هيدر */
  header{
    position:sticky; top:0; z-index:20; color:#fff;
    background:linear-gradient(180deg,var(--green1),var(--green2) 70%,var(--green3) 100%);
  }
  header::after{
    content:""; display:block; height:var(--barH);
    background:linear-gradient(90deg,var(--green1),#86f0d3,var(--green1));
  }
  .container{max-width:1200px; margin:auto; padding:16px 18px}
  .header-center{display:flex; flex-direction:column; align-items:center; gap:6px; text-align:center}
  .logo{
    width:56px; height:56px; border-radius:16px; display:grid; place-items:center; color:#fff;
    background:radial-gradient(circle at 30% 30%,#9ff5df,#37d7ae 55%,#0ca878 100%);
    box-shadow:0 10px 24px rgba(0,0,0,.15), inset 0 0 24px rgba(255,255,255,.12);
  }
  .logo svg{width:30px; height:30px}
  h1{margin:0; font-size:2.1rem; font-weight:800}
  .tagline{opacity:.95; font-size:1rem; margin:0}

  /* بطاقات */
  .grid{display:grid; gap:16px; margin-top:16px;
        grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
  article.card{background:var(--card); border:1px solid var(--ring); border-radius:18px;
               padding:0; box-shadow:var(--shadow); display:flex; flex-direction:column; overflow:hidden}
  .thumb{width:100%; max-height:220px; object-fit:cover; display:block; aspect-ratio:16/9; background:#eef3f7}
  .card-body{padding:14px 16px}
  .badge{display:inline-flex; gap:8px; align-items:center; font-size:.8rem; color:var(--green2);
         background:#e8fbf5; border:1px solid #b9f0df; padding:6px 10px; border-radius:999px}
  .title{font-size:1.12rem; font-weight:800; margin:8px 0 0}
  .excerpt{color:#2c3e50; font-size:.98rem}
  .meta{display:flex; gap:10px; color:#5f7286; font-size:.85rem}
  .top-row{display:flex; align-items:center; gap:8px}
  .more{margin-inline-start:auto; width:36px; height:36px; border-radius:12px;
        border:1px solid var(--ring); background:#fff; display:grid; place-items:center; cursor:pointer}
  .more svg{width:18px; height:18px; color:#0b2e3f}
  details{border-top:1px dashed var(--ring); padding-top:10px; margin-top:6px}
  summary{list-style:none; cursor:pointer; display:flex; gap:8px}
  summary::-webkit-details-marker{display:none}

  /* مشاركة */
  .sharebar-wrap{border-top:1px solid var(--ring); margin-top:26px; padding:16px 0}
  .sharebar{display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
  .sharebtn{width:42px; height:42px; border-radius:12px; background:#fff; border:1px solid var(--ring);
            display:grid; place-items:center; cursor:pointer}
  .sharebtn svg{width:22px; height:22px; stroke:#0a1020}

  /* تذييل */
  footer.site-footer{max-width:1200px; margin:8px auto 24px; text-align:center}
  a.credit{display:inline-flex; align-items:center; gap:8px; text-decoration:none;
           border:1px solid var(--ring); background:#fff; color:#0a1020;
           padding:8px 12px; border-radius:12px; font:600 13px/1.2 "Noto Kufi Arabic",sans-serif;
           box-shadow:0 6px 16px rgba(12,57,95,.12)}
  .site-bottom-bar{height:var(--barH);
    background:linear-gradient(180deg,var(--green1),var(--green2) 70%,var(--green3) 100%)}
</style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-center">
        <div class="logo">
          <svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="white"/>
            <path d="M4 12h3l2-3 2 6 2-4 2 3h3" stroke="white" stroke-width="1.6"
                  stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
        <h1>خط التماس الأخباري</h1>
        <p class="tagline">أخبار رياضية عربية</p>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="news" class="grid" aria-live="polite"></section>

    <div class="sharebar-wrap">
      <div class="sharebar">
        <button class="sharebtn" data-share="whatsapp"><svg viewBox="0 0 24 24"><path d="M4 20l1.8-3.8A8 8 0 1 1 12 20a8.5 8.5 0 0 1-4-.9L4 20Z"/><path d="M9 9.5c.2 2.6 2.7 5.1 5.3 5.3.4 0 .7-.1.9-.3l.6-.6M10 7l-1 1"/></svg></button>
        <button class="sharebtn" data-share="telegram"><svg viewBox="0 0 24 24"><path d="M20.8 4.2 9 10l3 2 8-7.5M12 12l1.2 7 2.3-3.8"/></svg></button>
        <button class="sharebtn" data-share="facebook"><svg viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="3"/><path d="M13 10h2V8h-2c-1.1 0-2 .9-2 2v2H9v2h2v4h2v-4h2l.6-2H13v-2Z"/></svg></button>
        <button class="sharebtn" data-share="x"><svg viewBox="0 0 24 24"><path d="M5 5l14 14M19 5 5 19" stroke-width="2"/></svg></button>
        <button class="sharebtn" data-share="linkedin"><svg viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="3"/><circle cx="8" cy="9" r="1.2"/><path d="M8 18v-6M12 18v-3c0-1.3 1.1-2.4 2.4-2.4S17 13.7 17 15v3"/></svg></button>
        <button class="sharebtn" data-share="copy"><svg viewBox="0 0 24 24"><rect x="9" y="9" width="9" height="11" rx="2"/><rect x="6" y="4" width="9" height="11" rx="2"/></svg></button>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <a class="credit" href="https://api.whatsapp.com/send/?phone=97333375858" target="_blank">برمجة وتطوير: <strong>فاضل الريس</strong></a>
  </footer>

  <div class="site-bottom-bar"></div>

<script>
(() => {
  const SUCCESS_REFRESH_MS = 30000, FAIL_REFRESH_MS = 1000, FEED_TIMEOUT_MS = 8000, LIMIT = 48;
  const FEEDS = [
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.alarabiya.net/.mrss/ar/sports.xml'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://aawsat.com/rss/section/sport'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://arabic.rt.com/rss/sport/'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.skynewsarabia.com/rss/sports')
  ];
  const $grid=document.getElementById('news');
  const SPORTS=/رياضة|رياضي|كرة|قدم|دوري|مباراة|منتخب|كأس|بطولة|نادي|مدرب|لاعب/i;
  const POL=/سياسة|رئيس|وزير|حكومة|انتخابات|حرب|مجلس|برلمان|احتلال|عقوبات/i;
  function ok(t,c){return SPORTS.test(t)&&!POL.test(t);}
  function strip(h){const d=document.createElement('div');d.innerHTML=h||'';return d.textContent||'';}
  function img(n){return n.querySelector('enclosure[url]')?.getAttribute('url')||'';}
  function card({title,excerpt,date,image}){return `
    <article class="card">
      ${image?`<img class="thumb" src="${image}" loading="lazy"/>`:''}
      <div class="card-body">
        <div class="top-row"><span class="badge">⚽ رياضة</span>
          <button class="more"><svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm-4 9a1 1 0 1 1 0 2Zm4 0a1 1 0 1 1 0 2Zm4 0a1 1 0 1 1 0 2Z"/></svg></button>
        </div>
        <h2 class="title">${title}</h2>
        <div class="meta">🕒 ${new Date(date).toLocaleTimeString('ar',{hour:'2-digit',minute:'2-digit'})}</div>
        <details><summary>عرض المقتطف</summary><p class="excerpt">${excerpt}</p></details>
      </div>
    </article>`;}
  async function fetchT(u){const c=new AbortController();setTimeout(()=>c.abort(),FEED_TIMEOUT_MS);
    const r=await fetch(u,{signal:c.signal});return r.ok? r.text():"";}
  function parse(x){const out=[];const xml=new DOMParser().parseFromString(x,'text/xml');
    xml.querySelectorAll('item').forEach(n=>{
      const t=(n.querySelector('title')?.textContent||'').trim();
      const d=n.querySelector('description')?.textContent||'';
      if(!ok(t+d,''))return;
      out.push({title:t,excerpt:strip(d).slice(0,260),date:new Date(),image:img(n)});
    });return out;}
  let timer=null;
  function schedule(ms){clearTimeout(timer);timer=setTimeout(load,ms);}
  async function load(){
    try{
      let items=[];
      for(const u of FEEDS){try{const txt=await fetchT(u);items=items.concat(parse(txt));}catch{}}
      if(!items.length) throw "fail";
      const seen=new Set(),uniq=[];for(const it of items){if(seen.has(it.title))continue;seen.add(it.title);uniq.push(it);}
      uniq.sort((a,b)=>b.date-a.date);$grid.innerHTML=uniq.slice(0,LIMIT).map(card).join('');
      schedule(SUCCESS_REFRESH_MS);
    }catch{schedule(FAIL_REFRESH_MS);}
  }
  document.addEventListener('click',e=>{
    const b=e.target.closest('.more');if(!b)return;
    const det=b.closest('.card')?.querySelector('details');if(det)det.open=!det.open;
  });
  load();
})();
</script>
</body>
</html>
