<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø®Ø· Ø§Ù„ØªÙ…Ø§Ø³ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±ÙŠ</title>

<!-- Ø®Ø· Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700;800&display=swap" rel="stylesheet" />
<!-- Ø®Ø· Ø£ØµØºØ± Ù„Ù„ØªØ°ÙŠÙŠÙ„ -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@400;600&display=swap" rel="stylesheet" />

<style>
  :root{
    --bg:#f6f8fb; --card:#ffffff; --ink:#0a1020; --muted:#5a6b7d;
    --ring:#e5eef6; --shadow:0 10px 25px rgba(19,52,89,.08);
    --green1:#11c295; --green2:#0aa27a; --green3:#0a865f;
    --barH:8px; /* Ø³Ù…Ø§ÙƒØ© Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ø³ÙÙ„ÙŠØ© */
    --danger:#d9534f; --warn:#f0ad4e; --ok:#0aa27a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0; background:var(--bg); color:var(--ink);
       font:16px/1.75 "Cairo",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

  /* Ù‡ÙŠØ¯Ø± Ø£Ø®Ø¶Ø± ØªØ¯Ø±Ù‘Ø¬ÙŠ */
  header{
    position:sticky; top:0; z-index:20; color:#fff;
    background:linear-gradient(180deg, var(--green1), var(--green2) 70%, var(--green3) 100%);
    border-bottom:0;
  }
  header::after{
    content:""; display:block; height:var(--barH);
    background:linear-gradient(90deg, var(--green1), #86f0d3, var(--green1));
  }
  .container{max-width:1200px; margin:auto; padding:16px 18px}
  .header-center{display:flex; flex-direction:column; align-items:center; gap:10px; text-align:center}
  .header-actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:center}

  .logo{
    width:56px; height:56px; border-radius:16px; display:grid; place-items:center; color:#fff;
    background:radial-gradient(circle at 30% 30%, #9ff5df, #37d7ae 55%, #0ca878 100%);
    box-shadow:0 10px 24px rgba(0,0,0,.15), inset 0 0 24px rgba(255,255,255,.12);
  }
  .logo svg{width:30px; height:30px}
  h1{margin:0; font-size:2.1rem; font-weight:800; letter-spacing:.3px; white-space:nowrap}
  .tagline{opacity:.95; font-size:1rem; margin:0}

  /* Ø²Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù† */
  .btn{
    border:1px solid rgba(255,255,255,.35);
    background:rgba(255,255,255,.12);
    color:#fff; border-radius:12px; padding:10px 14px; cursor:pointer; transition:.2s; font-weight:800
  }
  .btn:hover{transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.18)}
  .hint{font-size:.9rem; opacity:.85}

  /* Ø´Ø±ÙŠØ· Ø­Ø§Ù„Ø© Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
  .statusbar{
    margin:10px 0 0; padding:10px 12px; border-radius:12px; border:1px solid var(--ring);
    background:#fff; display:none; align-items:center; gap:10px; color:#334; font-weight:700
  }
  .statusbar.ok{display:flex; border-color:#b9f0df; color:#0a7d60; background:#e8fbf5}
  .statusbar.warn{display:flex; border-color:#ffe3a6; color:#7a5a00; background:#fff6da}
  .statusbar.err{display:flex; border-color:#ffc7c5; color:#8a2421; background:#ffeeed}
  .spin{width:16px; height:16px; border-radius:50%; border:2px solid #fff; border-top-color:#0aa27a; animation:sp 1s linear infinite}
  @keyframes sp{to{transform:rotate(360deg)}}

  /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø®Ø¨Ø§Ø± */
  .grid{display:grid; gap:16px; margin-top:16px; grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
  article.card{
    background:var(--card); border:1px solid var(--ring); border-radius:18px; padding:0;
    box-shadow:var(--shadow); display:flex; flex-direction:column; overflow:hidden
  }
  .thumb{
    width:100%; max-height:220px; object-fit:cover; display:block;
    aspect-ratio:16/9; background:#eef3f7;
  }
  .card-body{padding:14px 16px}
  .badge{
    display:inline-flex; gap:8px; align-items:center; font-size:.8rem; color:var(--green2);
    background:#e8fbf5; border:1px solid #b9f0df; padding:6px 10px; border-radius:999px; width:max-content
  }
  .title{font-size:1.12rem; font-weight:800; margin:8px 0 0}
  .excerpt{color:#2c3e50; font-size:.98rem}
  .meta{display:flex; gap:10px; color:#5f7286; font-size:.85rem}
  .top-row{display:flex; align-items:center; gap:8px}
  .more{
    margin-inline-start:auto; width:36px; height:36px; border-radius:12px;
    border:1px solid var(--ring); background:#fff; display:grid; place-items:center; cursor:pointer; transition:.2s
  }
  .more:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(12,57,95,.12)}
  .more svg{width:18px; height:18px; color:#0b2e3f}
  details{border-top:1px dashed var(--ring); padding-top:10px; margin-top:6px}
  details[open] summary{opacity:.7}
  summary{list-style:none; cursor:pointer; display:flex; align-items:center; gap:8px}
  summary::-webkit-details-marker{display:none}
  .empty,.error{text-align:center; color:#5b6b7c; padding:50px 20px; border:1px dashed var(--ring); border-radius:18px; background:#fff}

  /* Ø´Ø±ÙŠØ· Ù…Ø´Ø§Ø±ÙƒØ© Ø®Ø·Ù‘ÙŠ */
  .sharebar-wrap{border-top:1px solid var(--ring); margin-top:26px; padding:16px 0}
  .sharebar{display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:center}
  .sharebtn{
    width:42px; height:42px; border-radius:12px;
    background:#fff; border:1px solid var(--ring); display:grid; place-items:center; cursor:pointer; transition:.2s
  }
  .sharebtn:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(12,57,95,.12)}
  .sharebtn svg{width:22px; height:22px; stroke:#0a1020}

  /* ØªØ°ÙŠÙŠÙ„ Ø£ØµØºØ± Ø¨Ø®Ø· Ù…Ø®ØªÙ„Ù */
  footer.site-footer{max-width:1200px; margin:8px auto 24px; padding:0 18px; text-align:center}
  a.credit{
    display:inline-flex; align-items:center; gap:8px; text-decoration:none;
    border:1px solid var(--ring); background:#fff; color:#0a1020;
    padding:8px 12px; border-radius:12px; font:600 13px/1.2 "Noto Kufi Arabic",sans-serif;
    box-shadow:0 6px 16px rgba(12,57,95,.12); transition:.2s
  }
  a.credit:hover{transform:translateY(-1px)}

  /* Ø´Ø±ÙŠØ· Ø³ÙÙ„ÙŠ ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ù‡ÙŠØ¯Ø± (Ù†ÙØ³ Ø§Ù„ØªØ¯Ø±Ù‘Ø¬ ÙˆÙ†ÙØ³ Ø§Ù„Ø³Ù…Ø§ÙƒØ©) */
  .site-bottom-bar{
    height:var(--barH);
    background:linear-gradient(180deg, var(--green1), var(--green2) 70%, var(--green3) 100%);
    border-top:0;
  }

  .copy-toast{
    position:fixed; bottom:18px; inset-inline:0; margin:auto; width:max-content;
    background:linear-gradient(90deg,var(--green1),var(--green2)); color:white; padding:10px 14px;
    border-radius:12px; box-shadow:0 8px 30px rgba(10,162,122,.25); font-weight:800; display:none
  }
</style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-center">
        <div class="logo" aria-hidden="true" title="Ø´Ø¹Ø§Ø± Ø®Ø· Ø§Ù„ØªÙ…Ø§Ø³">
          <!-- Ù„ÙˆØ¬Ùˆ: ÙƒØ±Ø© Ù…Ø¹ Ù†Ø¨Ø¶Ø© -->
          <svg viewBox="0 0 24 24" fill="none" role="img" aria-label="Ø´Ø¹Ø§Ø±">
            <circle cx="12" cy="12" r="9" stroke="white" stroke-opacity=".9" />
            <path d="M4 12h3l2-3 2 6 2-4 2 3h3" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h1>Ø®Ø· Ø§Ù„ØªÙ…Ø§Ø³ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±ÙŠ</h1>
        <p class="tagline">Ø£Ø®Ø¨Ø§Ø± Ø±ÙŠØ§Ø¶ÙŠØ© Ø¹Ø±Ø¨ÙŠØ©</p>

        <!-- Ø²Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù† + ØªÙ„Ù…ÙŠØ­ -->
        <div class="header-actions">
          <button class="btn" id="refreshBtn" type="button" title="ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†" aria-label="ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†</button>
          <span class="hint" id="refreshHint">ÙŠÙØ­Ø¯Ù‘Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ â€¢ ÙŠØ¹ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØ´Ù„</span>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <div id="statusbar" class="statusbar" role="status" aria-live="polite"></div>

    <section id="news" class="grid" aria-live="polite" aria-busy="true"></section>
    <div id="status" class="empty" hidden>ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±â€¦</div>

    <!-- Ø´Ø±ÙŠØ· Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø®Ø·Ù‘ÙŠØ© -->
    <div class="sharebar-wrap">
      <div class="sharebar" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµÙØ­Ø©">
        <!-- ÙˆØ§ØªØ³Ø§Ø¨ -->
        <button class="sharebtn" data-share="whatsapp" title="ÙˆØ§ØªØ³Ø§Ø¨" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨">
          <svg viewBox="0 0 24 24" fill="none"><path d="M4 20l1.8-3.8A8 8 0 1 1 12 20a8.5 8.5 0 0 1-4-.9L4 20Z" stroke-width="1.6"/><path d="M9 9.5c.2 2.6 2.7 5.1 5.3 5.3.4 0 .7-.1.9-.3l.6-.6M10 7l-1 1" stroke-width="1.6" stroke-linecap="round"/></svg>
        </button>
        <!-- ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… -->
        <button class="sharebtn" data-share="telegram" title="ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…">
          <svg viewBox="0 0 24 24" fill="none"><path d="M20.8 4.2 9 10l3 2 8-7.5M12 12l1.2 7 2.3-3.8" stroke-width="1.6" stroke-linejoin="round"/></svg>
        </button>
        <!-- ÙÙŠØ³Ø¨ÙˆÙƒ -->
        <button class="sharebtn" data-share="facebook" title="ÙÙŠØ³Ø¨ÙˆÙƒ" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠØ³Ø¨ÙˆÙƒ">
          <svg viewBox="0 0 24 24" fill="none"><rect x="4" y="4" width="16" height="16" rx="3" stroke-width="1.6"/><path d="M13 10h2V8h-2c-1.1 0-2 .9-2 2v2H9v2h2v4h2v-4h2l.6-2H13v-2Z" stroke-width="0" fill="currentColor"/></svg>
        </button>
        <!-- X -->
        <button class="sharebtn" data-share="x" title="X" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© X">
          <svg viewBox="0 0 24 24" fill="none"><path d="M5 5l14 14M19 5 5 19" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <!-- Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù† -->
        <button class="sharebtn" data-share="linkedin" title="Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†" aria-label="Ù…Ø´Ø§Ø±ÙƒØ© Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†">
          <svg viewBox="0 0 24 24" fill="none"><rect x="4" y="4" width="16" height="16" rx="3" stroke-width="1.6"/><circle cx="8" cy="9" r="1.2"/><path d="M8 18v-6M12 18v-3c0-1.3 1.1-2.4 2.4-2.4S17 13.7 17 15v3" stroke-linecap="round" stroke-width="1.6"/></svg>
        </button>
        <!-- Ù†Ø³Ø® -->
        <button class="sharebtn" data-share="copy" title="Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·" aria-label="Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·">
          <svg viewBox="0 0 24 24" fill="none"><rect x="9" y="9" width="9" height="11" rx="2" stroke-width="1.6"/><rect x="6" y="4" width="9" height="11" rx="2" stroke-width="1.6"/></svg>
        </button>
      </div>
    </div>
  </main>

  <!-- Â«Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ±: ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³Â» (ÙŠÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨) -->
  <footer class="site-footer">
    <a class="credit" href="https://api.whatsapp.com/send/?phone=97333375858&text&type=phone_number&app_absent=0&wame_ctl=1&fbclid=PAVERDUAMmpVFleHRuA2FlbQIxMAABpyJPbGGA99AFnmjozjUr8s9ejerL-tlDxOqcQ4PlUxZoQi3rSh4orLwyOCk1_aem_Qwij4KmGwbbQgFaNdtN4ZA"
       target="_blank" rel="noopener" aria-label="Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨">
      Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ±: <strong>ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</strong>
    </a>
  </footer>

  <!-- Ø´Ø±ÙŠØ· Ø³ÙÙ„ÙŠ ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ù‡ÙŠØ¯Ø± ØªÙ…Ø§Ù…Ù‹Ø§ -->
  <div class="site-bottom-bar" aria-hidden="true"></div>

  <div class="copy-toast" id="copyToast">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ğŸ‘Œ</div>

<script>
(() => {
  // â€”â€” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© â€”â€” //
  const BASE_REFRESH_MS = 30_000;     // ÙØªØ±Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  const MAX_REFRESH_MS  = 3 * 60_000; // Ø£Ù‚ØµÙ‰ ÙØªØ±Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø§Ù„ØªØ¯Ø±ÙŠØ¬ÙŠ
  const FEED_TIMEOUT_MS = 8000;       // Ù…Ù‡Ù„Ø© Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„ÙˆØ§Ø­Ø¯
  const LIMIT = 48;

  // â€”â€” Ù…ØµØ§Ø¯Ø± Ø±ÙŠØ§Ø¶ÙŠØ© ÙÙ‚Ø· â€”â€” //
  const FEEDS = [
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.alarabiya.net/.mrss/ar/sports.xml'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://aawsat.com/rss/section/sport'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://arabic.rt.com/rss/sport/'),
    'https://api.allorigins.win/raw?url=' + encodeURIComponent('https://www.skynewsarabia.com/rss/sports')
  ];

  // Ø¹Ù†Ø§ØµØ± DOM
  const $grid = document.getElementById('news');
  const $status = document.getElementById('status');
  const $statusbar = document.getElementById('statusbar');
  const $refresh = document.getElementById('refreshBtn');

  // ÙÙ„ØªØ±Ø© ØµØ§Ø±Ù…Ø©: Ø±ÙŠØ§Ø¶Ø© ÙÙ‚Ø· + Ø­Ø¸Ø± Ø³ÙŠØ§Ø³ÙŠ
  const SPORTS_POSITIVE = /Ø±ÙŠØ§Ø¶Ø©|Ø±ÙŠØ§Ø¶ÙŠ|ÙƒØ±Ø©|Ù‚Ø¯Ù…|Ø¯ÙˆØ±ÙŠ|Ù…Ø¨Ø§Ø±Ø§Ø©|Ù…ÙˆØ§Ø¬Ù‡|Ø¬ÙˆÙ„Ø©|Ù‡Ø¯Ù|Ù‡Ø¯Ø§Ù|ØµØ¯Ø§Ø±Ø©|ØªØ´ÙƒÙŠÙ„|Ù…Ù†ØªØ®Ø¨|ÙƒØ£Ø³|Ø¨Ø·ÙˆÙ„Ø©|Ù†Ø§Ø¯ÙŠ|Ù…Ø¯Ø±Ø¨|Ù„Ø§Ø¹Ø¨|Ø§Ù†ØªÙ‚Ø§Ù„|Ø¥Ø¹Ø§Ø±Ø©|ØªØ¹Ø§Ù‚Ø¯|ØªØµÙÙŠØ§Øª|Ù…Ù„Ø¹Ø¨|Ø´ÙˆØ·|ÙØ±ÙŠÙ‚|ÙƒÙ„Ø§Ø³ÙŠÙƒÙˆ|Ø±ÙƒÙ„Ø©|Ø±ÙƒÙ†ÙŠØ§Øª|VAR|Ø­ÙƒÙ…|ØªØªÙˆÙŠØ¬|Ø¬Ø§Ø¦Ø²Ø©|Ù…ÙŠØ¯Ø§Ù„ÙŠØ©|Ø£Ù„Ø¹Ø§Ø¨|Ø£ÙˆÙ„Ù…Ø¨ÙŠ|Ø³Ù„Ø©|Ø·Ø§Ø¦Ø±Ø©|ÙŠØ¯|ØªÙ†Ø³|Ù…Ø¶Ø±Ø¨|ÙÙˆØ±Ù…ÙˆÙ„Ø§|Ù…Ø­ØªØ±ÙÙŠÙ†|ÙƒØ§Ø±Ø§ØªÙŠÙ‡|Ø¬ÙˆØ¯Ùˆ/i;
  const POLITICS_NEGATIVE = /Ø³ÙŠØ§Ø³Ø©|Ø³ÙŠØ§Ø³ÙŠ|Ø±Ø¦ÙŠØ³|ÙˆØ²ÙŠØ±|ÙˆØ²Ø§Ø±Ø©|Ø­ÙƒÙˆÙ…Ø©|Ø¨Ø±Ù„Ù…Ø§Ù†|Ø§Ù†ØªØ®Ø§Ø¨Ø§Øª|Ø­Ø²Ø¨|Ù…Ø¬Ù„Ø³|Ø§Ø­ØªÙ„Ø§Ù„|Ø­Ø±Ø¨|Ø¬Ø¨Ù‡Ø©|Ù‡Ø¯Ù†Ø©|Ø³Ù„Ø§Ù…|Ù…ÙØ§ÙˆØ¶Ø§Øª|Ø·Ø§Ù‚Ø©|ØºØ§Ø²|Ù†ÙØ·|Ø³ÙˆÙ‚|Ø¨ÙˆØ±ØµØ©|ØºØ²Ø©|Ø¥Ø³Ø±Ø§Ø¦ÙŠÙ„|Ø³ÙˆØ±ÙŠØ©|Ø³ÙˆØ±ÙŠØ§|Ø§Ù„ÙŠÙ…Ù†|Ù„ÙŠØ¨ÙŠØ§|Ø§Ù„Ø¹Ø±Ø§Ù‚|Ù…Ø¬Ù„Ø³\s*Ø§Ù„Ø£Ù…Ù†|Ø¹Ù‚ÙˆØ¨Ø§Øª|Ø§Ù†Ù‚Ù„Ø§Ø¨|Ù‚ØµÙ|Ù‡Ø¬ÙˆÙ…|Ø¹Ù…Ù„ÙŠØ©\s*Ø¹Ø³ÙƒØ±ÙŠØ©|Ø§ØºØªÙŠØ§Ù„|Ø³Ø¬Ø§Ù„|Ø§Ø¦ØªÙ„Ø§Ù|Ù…Ø¹Ø§Ø±Ø¶Ø©|Ø¯Ø¨Ù„ÙˆÙ…Ø§/i;

  function isSportsOnly(text, cats){
    const blob = `${text} ${cats||''}`;
    return SPORTS_POSITIVE.test(blob) && !POLITICS_NEGATIVE.test(blob);
  }

  function strip(html){
    const tmp = document.createElement('div');
    tmp.innerHTML = (html || '')
      .replace(/<script[^>]*>[\s\S]*?<\/script>/gi,'')
      .replace(/<style[^>]*>[\s\S]*?<\/style>/gi,'');
    return (tmp.textContent || tmp.innerText || '').replace(/\s+/g,' ').trim();
  }

  // Ø§Ø³ØªØ®Ø±Ø§Ø¬ ØµÙˆØ±Ø©
  function getImageFromNode(n){
    const enc = n.querySelector('enclosure[url][type*="image"]')?.getAttribute('url');
    if(enc) return enc;
    const m1 = n.querySelector('media\\:content[url], content[url], media\\:thumbnail[url], thumbnail[url]');
    if(m1 && m1.getAttribute) {
      const url = m1.getAttribute('url');
      if(url) return url;
    }
    const raw = n.querySelector('description, summary, content')?.textContent || '';
    const imgMatch = raw.match(/<img[^>]+src=["']([^"']+)["']/i);
    if(imgMatch && imgMatch[1]) return imgMatch[1];
    return '';
  }

  function escapeHTML(s){return (s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');}

  function card({title, excerpt, date, image}){
    const id = btoa(unescape(encodeURIComponent(title))).slice(0,24);
    return `
      <article class="card" data-id="${id}">
        ${image ? `<img class="thumb" src="${image}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±" loading="lazy" referrerpolicy="no-referrer" />` : ''}
        <div class="card-body">
          <div class="top-row">
            <span class="badge" aria-label="ØªØµÙ†ÙŠÙ Ø§Ù„Ø®Ø¨Ø±">âš½ Ø±ÙŠØ§Ø¶Ø©</span>
            <button class="more" title="Ù…Ø²ÙŠØ¯" aria-label="Ù…Ø²ÙŠØ¯ (ÙØªØ­ Ø§Ù„Ù…Ù‚ØªØ·Ù)">
              <svg viewBox="0 0 24 24" role="img" aria-label="Ù…Ø²ÙŠØ¯">
                <path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm-4 9a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm4 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/>
              </svg>
            </button>
          </div>
          <h2 class="title">${escapeHTML(title)}</h2>
          <div class="meta">ğŸ•’ <span>${new Date(date).toLocaleTimeString('ar',{hour:'2-digit',minute:'2-digit'})}</span></div>
          <details><summary>Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚ØªØ·Ù</summary><p class="excerpt">${escapeHTML(excerpt || 'â€”')}</p></details>
        </div>
      </article>
    `;
  }

  async function fetchWithTimeout(url, timeoutMs){
    const ctrl = new AbortController();
    const t = setTimeout(()=>ctrl.abort('timeout'), timeoutMs);
    try{
      const r = await fetch(url, {cache:'no-store', signal:ctrl.signal});
      if(!r.ok) throw new Error('HTTP '+r.status);
      return await r.text();
    } finally { clearTimeout(t); }
  }

  function parseFeed(xmlText){
    const out = [];
    try{
      const xml = new DOMParser().parseFromString(xmlText, 'text/xml');
      const nodes = Array.from(xml.querySelectorAll('item, entry'));
      for(const n of nodes){
        const title = (n.querySelector('title')?.textContent || '').trim();
        if(!title) continue;
        const descNode = n.querySelector('description, summary, content');
        const desc = descNode?.textContent || '';
        const cats = Array.from(n.querySelectorAll('category, section')).map(x=>x.textContent).join(' ');
        const pub  = n.querySelector('pubDate, updated, published')?.textContent || new Date().toISOString();
        const date = new Date(pub);
        const plain = strip(desc);

        if(!isSportsOnly(`${title} ${plain}`, cats)) continue;

        const image = getImageFromNode(n);
        out.push({ title, excerpt: plain.slice(0,260), date: isNaN(date) ? new Date() : date, image });
      }
    }catch{/* ØªØ¬Ø§Ù‡ÙÙ„ */}
    return out;
  }

  // â€”â€” Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø°ÙƒÙŠ Ù…Ø¹ ØªØ±Ø§Ø¬Ø¹ ØªØ¯Ø±ÙŠØ¬ÙŠ â€”â€” //
  let timer = null;
  let currentInterval = BASE_REFRESH_MS;
  let consecutiveFailures = 0;

  function setStatus(kind, text){
    if(!text){ $statusbar.style.display='none'; $statusbar.className='statusbar'; $statusbar.textContent=''; return; }
    $statusbar.className = 'statusbar ' + kind;
    $statusbar.innerHTML = (kind==='ok' ? 'âœ… ' : kind==='warn' ? 'âš ï¸ ' : 'â›” ') + escapeHTML(text);
    $statusbar.style.display='flex';
  }

  async function load(){
    // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«"
    setStatus('warn', 'ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±â€¦');
    $grid.setAttribute('aria-busy','true');
    $status.hidden = false; $status.className='empty'; $status.textContent = 'ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±â€¦';

    try{
      const CONCURRENCY = 4;
      let items = [];
      for(let i=0;i<FEEDS.length;i+=CONCURRENCY){
        const batch = FEEDS.slice(i,i+CONCURRENCY);
        const texts = await Promise.allSettled(batch.map(u => fetchWithTimeout(u, FEED_TIMEOUT_MS)));
        const parsed = texts
          .filter(x=>x.status==='fulfilled')
          .flatMap(x=>parseFeed(x.value));
        items = items.concat(parsed);
      }

      // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙ†Ø¬Ø­ Ø£ÙŠ Ù…ØµØ¯Ø± Ø§Ø¹ØªØ¨Ø±Ù‡Ø§ ÙØ´Ù„ Ø¬ÙˆÙ„Ø©
      if(items.length === 0) throw new Error('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø³ØªØ¬Ø§Ø¨Ø§Øª ØµØ§Ù„Ø­Ø© Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ø±');

      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª + ÙØ±Ø²
      const seen = new Set(), unique = [];
      for(const it of items){
        const k = it.title.trim().toLowerCase();
        if(seen.has(k)) continue; seen.add(k); unique.push(it);
      }
      unique.sort((a,b)=> b.date - a.date);
      const limited = unique.slice(0, LIMIT);

      if(!limited.length){
        $grid.innerHTML=''; $status.hidden=false; $status.textContent='Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ø±ÙŠØ§Ø¶ÙŠØ© Ø§Ù„Ø¢Ù†.';
        setStatus('warn','Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ø±ÙŠØ§Ø¶ÙŠØ© Ø§Ù„Ø¢Ù† â€” Ø³Ù†Ø¹Ø§ÙˆØ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.');
      } else {
        $status.hidden=true; $grid.innerHTML = limited.map(card).join('');
        setStatus('ok','ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­.');
      }

      // Ù†Ø¬Ø§Ø­: ØµÙÙ‘Ø± Ø§Ù„ÙØ´Ù„ ÙˆØ£Ø¹Ø¯ Ø§Ù„ÙØªØ±Ø© Ù„Ù„Ø£Ø³Ø§Ø³
      consecutiveFailures = 0;
      if(currentInterval !== BASE_REFRESH_MS){
        currentInterval = BASE_REFRESH_MS;
        scheduleNext(); // Ø·Ø¨Ù‘Ù‚ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
      }
    }catch(e){
      console.error(e);
      // ÙØ´Ù„: Ø£Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©ØŒ Ø²Ø¯ Ø§Ù„ØªØ±Ø§Ø¬Ø¹ØŒ ÙˆØ¹Ø§ÙˆØ¯ Ù„Ø§Ø­Ù‚Ù‹Ø§
      consecutiveFailures++;
      currentInterval = Math.min(MAX_REFRESH_MS, Math.round(BASE_REFRESH_MS * Math.pow(1.8, consecutiveFailures)));
      $grid.innerHTML=''; $status.hidden=false; $status.className='error';
      $status.textContent='ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¢Ù†. Ø³ÙŠÙØ¹Ø§Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.';
      setStatus('err', `ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø¬Ù„Ø¨ (#${consecutiveFailures}). Ø³ÙŠÙØ¹Ø§Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø®Ù„Ø§Ù„ ${(currentInterval/1000)|0} Ø«Ø§Ù†ÙŠØ©.`);
      scheduleNext();
    } finally {
      $grid.removeAttribute('aria-busy');
    }
  }

  function clearNext(){
    if(timer){ clearTimeout(timer); timer = null; }
  }
  function scheduleNext(){
    clearNext();
    timer = setTimeout(load, currentInterval);
  }

  // Ø²Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†
  if($refresh){ $refresh.addEventListener('click', () => { clearNext(); load(); }); }

  // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù†Ù‚Ø·Ø§Ø¹/Ø¹ÙˆØ¯Ø© Ø§Ù„Ø´Ø¨ÙƒØ©
  window.addEventListener('offline', () => {
    setStatus('err','Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª. Ø³Ù†Ø¹Ø§ÙˆØ¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø¹ÙˆØ¯ØªÙ‡.');
  });
  window.addEventListener('online', () => {
    setStatus('warn','Ø¹Ø§Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ â€” ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø¢Ù†â€¦');
    clearNext(); load();
  });

  // Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Â«Ù…Ø²ÙŠØ¯Â»
  document.addEventListener('click', (ev) => {
    const btn = ev.target.closest('.more');
    if(!btn) return;
    const det = btn.closest('.card')?.querySelector('details');
    if(det) det.open = !det.open;
  });

  // Ù…Ø´Ø§Ø±ÙƒØ©
  const shareText = 'ØªØ§Ø¨Ø¹ Â«Ø®Ø· Ø§Ù„ØªÙ…Ø§Ø³ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±ÙŠÂ»: Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.';
  function openShare(url){ window.open(url, '_blank','noopener'); }
  document.querySelectorAll('.sharebtn').forEach(btn=>{
    btn.addEventListener('click', async ()=>{
      const kind = btn.dataset.share, pageURL = location.href;
      if(kind==='copy'){
        try{
          await navigator.clipboard.writeText(`${shareText}\n${pageURL}`);
          const t = document.getElementById('copyToast');
          t.style.display='block'; setTimeout(()=>t.style.display='none', 1600);
        }catch{}
        return;
      }
      const msg = encodeURIComponent(shareText), url = encodeURIComponent(pageURL);
      if(kind==='whatsapp') openShare(`https://wa.me/?text=${msg}%0A${url}`);
      if(kind==='telegram') openShare(`https://t.me/share/url?url=${url}&text=${msg}`);
      if(kind==='facebook') openShare(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${msg}`);
      if(kind==='x') openShare(`https://x.com/intent/tweet?text=${msg}&url=${url}`);
      if(kind==='linkedin') openShare(`https://www.linkedin.com/sharing/share-offsite/?url=${url}`);
    });
  });

  // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ + Ø¬Ø¯ÙˆÙ„Ø©
  load();
  scheduleNext();
  document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) { clearNext(); load(); } });
})();
</script>
</body>

<!-- Ø´Ø±ÙŠØ· Ø³ÙÙ„ÙŠ ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ù‡ÙŠØ¯Ø± ØªÙ…Ø§Ù…Ù‹Ø§ -->
<div class="site-bottom-bar" aria-hidden="true"></div>
<div class="copy-toast" id="copyToast">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ğŸ‘Œ</div>
</html>
