<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªØ°ÙƒØ±ØªÙƒ | Ù‚Ø§Ø±Ù† Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØªØ°Ø§ÙƒØ±</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f8fafc; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e2e8f0;
      --brand:#0ea5e9; --brand2:#0284c7; --shadow:0 12px 30px rgba(2,132,199,.12);
      --radius:18px; --ring:0 0 0 3px rgba(14,165,233,.25);
      --chip:#f1f5f9; --chip-border:#e5e7eb; --chip-active:#e0f2fe;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:'Cairo',system-ui,Segoe UI,Roboto,Arial}
    header{background:#fff;border-bottom:1px solid var(--line);position:sticky;top:0;z-index:10}
    .container{max-width:980px;margin:auto;padding:20px 16px}
    .brand{text-align:center;margin-top:6px;position:relative}
    .brand .title{font-weight:900;font-size:32px;color:var(--brand)}
    .brand .tag{margin-top:6px;color:#374151;font-weight:700}
    .lang-toggle{position:absolute;left:0;top:0}
    .lang-btn{background:#fff;border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-weight:700;font-size:13px;cursor:pointer;box-shadow:var(--shadow)}
    .lang-btn:hover{filter:brightness(.98)}

    /* Ù†Ù…ÙˆØ°Ø¬ */
    form.search{display:grid;gap:12px;margin-top:18px}

    /* Ø£Ø²Ø±Ø§Ø± Ù†Ù…Ø· Ø§Ù„Ø±Ø­Ù„Ø© (ÙƒØ¨Ø³ÙˆÙ„Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©) */
    .mode{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
    .chip{
      display:inline-flex; align-items:center; gap:10px;
      background:var(--chip);
      border:2px solid var(--chip-border);
      border-radius:999px;
      padding:10px 16px;
      cursor:pointer;
      box-shadow:0 2px 10px rgba(0,0,0,.04);
      transition:all .18s ease;
      font-weight:800; color:#0b2540; letter-spacing:.2px;
      user-select:none;
    }
    .chip input{display:none}
    .chip:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(2,132,199,.12)}
    .chip.active{
      background:linear-gradient(180deg,var(--chip-active),#ffffff);
      border-color:#7dd3fc;
      box-shadow:0 10px 22px rgba(14,165,233,.18), var(--ring);
      color:#075985;
    }
    .chip .dot{
      width:10px;height:10px;border-radius:50%;
      background:#94a3b8;border:2px solid #e2e8f0; transition:.18s;
    }
    .chip.active .dot{background:#0284c7;border-color:#bae6fd}

    .fld{background:var(--card);border:2px solid var(--line);border-radius:18px;padding:14px 16px;box-shadow:var(--shadow)}
    .fld:focus-within{border-color:var(--brand);box-shadow:var(--shadow),var(--ring)}
    .lbl{font-size:13px;color:var(--muted);margin-bottom:6px}
    .mini-search{width:100%;border:1px solid var(--line);border-radius:12px;padding:8px 12px;font-size:15px;margin:6px 0 10px;background:#f8fafc}
    select,input{width:100%;border:0;outline:none;background:transparent;font-size:18px;padding:8px 0;color:var(--ink)}
    input[type=date]{font-size:16px;padding:6px}
    .row2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .fld.hid{display:none}

    .cta{
      width:100%;
      background:linear-gradient(180deg,var(--brand),var(--brand2));
      color:#fff;border:0;border-radius:18px;padding:16px;
      font-weight:900;cursor:pointer;font-size:18px;box-shadow:var(--shadow);
      letter-spacing:.2px
    }
    .cta:hover{filter:brightness(.98)}

    /* ØªØ°ÙŠÙŠÙ„ + ØªÙ†ÙˆÙŠÙ‡ + ØªÙˆØ§ØµÙ„ */
    footer{margin:22px auto 10px;max-width:980px;padding:0 16px;text-align:center}
    .disclaimer{
      font-size:15px;color:#1f2937;background:linear-gradient(180deg,#fefefe,#f1f5f9);
      border:1px solid #e2e8f0;border-radius:14px;padding:16px 20px;margin-bottom:14px;
      line-height:1.9;text-align:justify;box-shadow:0 4px 10px rgba(0,0,0,.05)
    }
    .disclaimer strong{color:#d97706}
    .disclaimer::before{content:"âš ï¸ ";font-size:20px;vertical-align:middle;margin-left:4px}

    .social{margin-bottom:12px}
    .social a{display:inline-block;margin:0 6px;width:28px;height:28px}
    .social img{width:100%;height:100%;object-fit:contain;filter:grayscale(20%);transition:.2s}
    .social img:hover{filter:none;transform:scale(1.1)}

    .credit{font-size:16px;color:#475569;margin-top:10px}
    .credit a{color:#0ea5e9;text-decoration:none;font-weight:900}
    .credit a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <div class="lang-toggle">
          <!-- Ø²Ø± Ù†ØµÙ‘ÙŠ ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
          <button id="langBtn" class="lang-btn" type="button">EN</button>
        </div>
        <div id="siteTitle" class="title">ØªØ°ÙƒØ±ØªÙƒ</div>
        <div id="siteTag" class="tag">Ø§Ø³ØªÙƒØ´Ù Ø£Ø±Ø®Øµ Ø£Ø³Ø¹Ø§Ø± ØªØ°Ø§ÙƒØ± Ø§Ù„Ø·ÙŠØ±Ø§Ù†</div>
      </div>

      <form class="search" onsubmit="event.preventDefault(); openSelected();">
        <!-- Ù†Ù…Ø· Ø§Ù„Ø±Ø­Ù„Ø© -->
        <div class="mode" id="tripModeGroup">
          <label class="chip active">
            <span class="dot"></span>
            <input type="radio" name="tripmode" value="return" checked>
            <span data-i18n="return">Ø°Ù‡Ø§Ø¨ ÙˆØ¹ÙˆØ¯Ø©</span>
          </label>
          <label class="chip">
            <span class="dot"></span>
            <input type="radio" name="tripmode" value="oneway">
            <span data-i18n="oneway">Ø°Ù‡Ø§Ø¨ ÙÙ‚Ø·</span>
          </label>
          <label class="chip">
            <span class="dot"></span>
            <input type="radio" name="tripmode" value="multicity">
            <span data-i18n="multicity">ÙˆØ¬Ù‡Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©</span>
          </label>
        </div>

        <!-- Ù…Ù† -->
        <div class="fld">
          <div class="lbl" data-i18n="from">Ù…Ù†</div>
          <input id="search-origin" class="mini-search" type="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¯ÙˆÙ„Ø© Ø£Ùˆ Ù…Ø·Ø§Ø±...">
          <select id="origin"></select>
        </div>

        <!-- Ø¥Ù„Ù‰ -->
        <div class="fld">
          <div class="lbl" data-i18n="to">Ø¥Ù„Ù‰</div>
          <input id="search-destination" class="mini-search" type="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¯ÙˆÙ„Ø© Ø£Ùˆ Ù…Ø·Ø§Ø±...">
          <select id="destination"></select>
        </div>

        <!-- Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® -->
        <div class="row2">
          <div class="fld">
            <div class="lbl" data-i18n="depart">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø°Ù‡Ø§Ø¨</div>
            <input id="dep" type="date">
          </div>
          <div id="retFld" class="fld">
            <div class="lbl" data-i18n="returnDate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹ÙˆØ¯Ø©</div>
            <input id="ret" type="date">
          </div>
        </div>

        <!-- Ø§Ù„Ø±ÙƒØ§Ø¨ ÙˆØ§Ù„Ø¯Ø±Ø¬Ø© -->
        <div class="fld">
          <div class="lbl" data-i18n="pax">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§ÙØ±ÙŠÙ†</div>
          <input id="pax" type="number" min="1" value="1">
        </div>
        <div class="fld">
          <div class="lbl" data-i18n="cabin">Ø§Ù„Ø¯Ø±Ø¬Ø©</div>
          <select id="cabin">
            <option value="economy" selected data-i18n="eco">Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©</option>
            <option value="business" data-i18n="bus">Ø£Ø¹Ù…Ø§Ù„</option>
            <option value="first" data-i18n="first">Ø£ÙˆÙ„Ù‰</option>
          </select>
        </div>

        <!-- Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
        <div class="fld">
          <div class="lbl" data-i18n="provider">Ø§Ù„Ù…ÙˆÙ‚Ø¹</div>
          <select id="provider">
            <option value="skyscanner">Skyscanner</option>
            <option value="kayak">KAYAK</option>
          </select>
        </div>

        <button id="searchBtn" class="cta" type="submit">Ø§Ø¨Ø­Ø« ğŸ”</button>
      </form>
    </div>
  </header>

  <footer>
    <div class="disclaimer">
      <strong>ØªÙ†ÙˆÙŠÙ‡:</strong> Ù†Ø­Ù† Ù„Ø§ Ù†Ø¨ÙŠØ¹ Ø§Ù„ØªØ°Ø§ÙƒØ± ÙˆÙ„Ø§ Ù†Ø¹Ù…Ù„ ÙƒÙˆØ³ÙŠØ·. Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø© Ø£Ø¯Ø§Ø© Ø¨Ø­Ø« ÙÙ‚Ø·
      ØªÙ‚ÙˆÙ… Ø¨Ø¥Ø­Ø§Ù„ØªÙƒ Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹ Ø¥Ù„Ù‰ Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ© Ù„Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†ÙØ³Ùƒ. Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„ØªÙˆØ§ÙØ± ÙŠØ®Ø¶Ø¹Ø§Ù† Ù„Ø´Ø±ÙˆØ·
      ØªÙ„Ùƒ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹.
    </div>

    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© -->
    <div class="social">
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://fadhel-alrayes.fun/index13.html" target="_blank" rel="noopener">
        <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg" alt="Facebook">
      </a>
      <a href="https://twitter.com/intent/tweet?url=https://fadhel-alrayes.fun/index13.html&text=Ø´Ø§Ù‡Ø¯%20ØªØ°ÙƒØ±ØªÙƒ" target="_blank" rel="noopener">
        <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/x.svg" alt="X">
      </a>
      <a href="https://api.whatsapp.com/send?text=Ø¬Ø±Ø¨%20Ù…ÙˆÙ‚Ø¹%20ØªØ°ÙƒØ±ØªÙƒ%20%20https://fadhel-alrayes.fun/index13.html" target="_blank" rel="noopener">
        <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/whatsapp.svg" alt="WhatsApp">
      </a>
      <a href="https://t.me/share/url?url=https://fadhel-alrayes.fun/index13.html&text=ØªØ°ÙƒØ±ØªÙƒ%20Ø§Ø¨Ø­Ø«%20Ø¹Ù†%20Ø£Ø±Ø®Øµ%20ØªØ°Ø§ÙƒØ±%20Ø§Ù„Ø·ÙŠØ±Ø§Ù†" target="_blank" rel="noopener">
        <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/telegram.svg" alt="Telegram">
      </a>
    </div>

    <p class="credit">
      Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØ·ÙˆÙŠØ±:
      <a href="https://api.whatsapp.com/send/?phone=97333375858&text&type=phone_number&app_absent=0&wame_ctl=1"
         target="_blank" rel="noopener">ÙØ§Ø¶Ù„ Ø§Ù„Ø±ÙŠØ³</a>
    </p>
  </footer>

  <script>
    /************ 1) Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø±Ø§Øª ************/
    const ARAB_AIRPORTS = [
      {country:'Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†', city:'Ø§Ù„Ù…Ù†Ø§Ù…Ø©', code:'BAH'},

      {country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø§Ù„Ø±ÙŠØ§Ø¶', code:'RUH'},{country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø¬Ø¯Ø©', code:'JED'},
      {country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø§Ù„Ø¯Ù…Ø§Ù…', code:'DMM'},{country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©', code:'MED'},
      {country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø£Ø¨Ù‡Ø§', code:'AHB'},{country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø§Ù„Ù‚ØµÙŠÙ…', code:'ELQ'},
      {country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø¬Ø§Ø²Ø§Ù†', code:'GIZ'},{country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø­Ø§Ø¦Ù„', code:'HAS'},
      {country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'ØªØ¨ÙˆÙƒ', code:'TUU'},{country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø§Ù„Ø¹Ù„Ø§', code:'ULH'},
      {country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'ÙŠÙ†Ø¨Ø¹', code:'YNB'},{country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ø§Ù„Ø·Ø§Ø¦Ù', code:'TIF'},
      {country:'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', city:'Ù†Ø¬Ø±Ø§Ù†', code:'EAM'},

      {country:'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', city:'Ø¯Ø¨ÙŠ', code:'DXB'},{country:'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', city:'Ø£Ø¨ÙˆØ¸Ø¨ÙŠ', code:'AUH'},
      {country:'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', city:'Ø§Ù„Ø´Ø§Ø±Ù‚Ø©', code:'SHJ'},{country:'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', city:'Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©', code:'RKT'},
      {country:'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', city:'Ø§Ù„Ø¹ÙŠÙ†', code:'AAN'},

      {country:'Ù‚Ø·Ø±', city:'Ø§Ù„Ø¯ÙˆØ­Ø©', code:'DOH'},
      {country:'Ø§Ù„ÙƒÙˆÙŠØª', city:'Ø§Ù„ÙƒÙˆÙŠØª', code:'KWI'},

      {country:'Ø¹ÙÙ…Ø§Ù†', city:'Ù…Ø³Ù‚Ø·', code:'MCT'},{country:'Ø¹ÙÙ…Ø§Ù†', city:'ØµÙ„Ø§Ù„Ø©', code:'SLL'},{country:'Ø¹ÙÙ…Ø§Ù†', city:'ØµØ­Ø§Ø±', code:'OHS'},

      {country:'Ø§Ù„ÙŠÙ…Ù†', city:'ØµÙ†Ø¹Ø§Ø¡', code:'SAH'},{country:'Ø§Ù„ÙŠÙ…Ù†', city:'Ø¹Ø¯Ù†', code:'ADE'},{country:'Ø§Ù„ÙŠÙ…Ù†', city:'Ø³ÙŠØ¦ÙˆÙ†', code:'GXF'},

      {country:'Ø³ÙˆØ±ÙŠØ§', city:'Ø¯Ù…Ø´Ù‚', code:'DAM'},{country:'Ø³ÙˆØ±ÙŠØ§', city:'Ø­Ù„Ø¨', code:'ALP'},{country:'Ø³ÙˆØ±ÙŠØ§', city:'Ø§Ù„Ù„Ø§Ø°Ù‚ÙŠØ©', code:'LTK'},

      {country:'Ø§Ù„Ø£Ø±Ø¯Ù†', city:'Ø¹Ù…Ù‘Ø§Ù†', code:'AMM'},{country:'Ø§Ù„Ø£Ø±Ø¯Ù†', city:'Ø§Ù„Ø¹Ù‚Ø¨Ø©', code:'AQJ'},

      {country:'Ù„Ø¨Ù†Ø§Ù†', city:'Ø¨ÙŠØ±ÙˆØª', code:'BEY'},

      {country:'Ù…ØµØ±', city:'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©', code:'CAI'},
      {country:'Ù…ØµØ±', city:'Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©/Ø¨Ø±Ø¬ Ø§Ù„Ø¹Ø±Ø¨', code:'HBE'},
      {country:'Ù…ØµØ±', city:'Ø§Ù„ØºØ±Ø¯Ù‚Ø©', code:'HRG'},
      {country:'Ù…ØµØ±', city:'Ø´Ø±Ù… Ø§Ù„Ø´ÙŠØ®', code:'SSH'},
      {country:'Ù…ØµØ±', city:'Ø§Ù„Ø£Ù‚ØµØ±', code:'LXR'},
      {country:'Ù…ØµØ±', city:'Ø£Ø³ÙˆØ§Ù†', code:'ASW'},
      {country:'Ù…ØµØ±', city:'Ù…Ø±Ø³Ù‰ Ø¹Ù„Ù…', code:'RMF'},
      {country:'Ù…ØµØ±', city:'Ø³ÙˆÙ‡Ø§Ø¬', code:'HMB'},
      {country:'Ù…ØµØ±', city:'Ø£Ø³ÙŠÙˆØ·', code:'ATZ'},

      {country:'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†', city:'Ø§Ù„Ø®Ø±Ø·ÙˆÙ…', code:'KRT'},{country:'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†', city:'Ø¨ÙˆØ±ØªØ³ÙˆØ¯Ø§Ù†', code:'PZU'},

      {country:'Ù„ÙŠØ¨ÙŠØ§', city:'Ø·Ø±Ø§Ø¨Ù„Ø³ Ù…Ø¹ÙŠØªÙŠÙ‚Ø©', code:'MJI'},{country:'Ù„ÙŠØ¨ÙŠØ§', city:'Ø¨Ù†ØºØ§Ø²ÙŠ', code:'BEN'},{country:'Ù„ÙŠØ¨ÙŠØ§', city:'Ù…ØµØ±Ø§ØªØ©', code:'MRA'},

      {country:'ØªÙˆÙ†Ø³', city:'ØªÙˆÙ†Ø³ Ù‚Ø±Ø·Ø§Ø¬', code:'TUN'},{country:'ØªÙˆÙ†Ø³', city:'ØµÙØ§Ù‚Ø³', code:'SFA'},
      {country:'ØªÙˆÙ†Ø³', city:'Ø¬Ø±Ø¨Ø©/Ø¬Ø±Ø¬ÙŠØ³', code:'DJE'},{country:'ØªÙˆÙ†Ø³', city:'Ø§Ù„Ù…Ù†Ø³ØªÙŠØ±', code:'MIR'},{country:'ØªÙˆÙ†Ø³', city:'Ø§Ù„Ù†ÙÙŠØ¶Ø©', code:'NBE'},

      {country:'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', city:'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', code:'ALG'},{country:'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', city:'ÙˆÙ‡Ø±Ø§Ù†', code:'ORN'},
      {country:'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', city:'Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©', code:'CZL'},{country:'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', city:'ØºØ±Ø¯Ø§ÙŠØ©', code:'GHA'},

      {country:'Ø§Ù„Ù…ØºØ±Ø¨', city:'Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡', code:'CMN'},{country:'Ø§Ù„Ù…ØºØ±Ø¨', city:'Ø§Ù„Ø±Ø¨Ø§Ø·', code:'RBA'},
      {country:'Ø§Ù„Ù…ØºØ±Ø¨', city:'Ù…Ø±Ø§ÙƒØ´', code:'RAK'},{country:'Ø§Ù„Ù…ØºØ±Ø¨', city:'Ø·Ù†Ø¬Ø©', code:'TNG'},
      {country:'Ø§Ù„Ù…ØºØ±Ø¨', city:'Ø£ÙƒØ§Ø¯ÙŠØ±', code:'AGA'},{country:'Ø§Ù„Ù…ØºØ±Ø¨', city:'ÙØ§Ø³', code:'FEZ'},{country:'Ø§Ù„Ù…ØºØ±Ø¨', city:'ÙˆØ¬Ø¯Ø©', code:'OUD'},

      {country:'Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§', city:'Ù†ÙˆØ§ÙƒØ´ÙˆØ·', code:'NKC'},
      {country:'Ø¬ÙŠØ¨ÙˆØªÙŠ', city:'Ø¬ÙŠØ¨ÙˆØªÙŠ', code:'JIB'},
      {country:'Ø§Ù„ØµÙˆÙ…Ø§Ù„', city:'Ù…Ù‚Ø¯ÙŠØ´Ùˆ', code:'MGQ'},{country:'Ø§Ù„ØµÙˆÙ…Ø§Ù„', city:'Ù‡Ø±Ø¬ÙŠØ³Ø§', code:'HGA'},
      {country:'Ø¬Ø²Ø± Ø§Ù„Ù‚Ù…Ø±', city:'Ù…ÙˆØ±ÙˆÙ†ÙŠ', code:'HAH'}
    ];

    const IRAQ_AIRPORTS = [
      {country:'Ø§Ù„Ø¹Ø±Ø§Ù‚', city:'Ø¨ØºØ¯Ø§Ø¯', code:'BGW'},{country:'Ø§Ù„Ø¹Ø±Ø§Ù‚', city:'Ø£Ø±Ø¨ÙŠÙ„', code:'EBL'},
      {country:'Ø§Ù„Ø¹Ø±Ø§Ù‚', city:'Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©', code:'ISU'},{country:'Ø§Ù„Ø¹Ø±Ø§Ù‚', city:'Ø§Ù„Ø¨ØµØ±Ø©', code:'BSR'},
      {country:'Ø§Ù„Ø¹Ø±Ø§Ù‚', city:'Ø§Ù„Ù†Ø¬Ù', code:'NJF'},{country:'Ø§Ù„Ø¹Ø±Ø§Ù‚', city:'Ø§Ù„Ù…ÙˆØµÙ„', code:'OSM'},
      {country:'Ø§Ù„Ø¹Ø±Ø§Ù‚', city:'ÙƒØ±Ø¨Ù„Ø§Ø¡ (Ø£Ù‚Ø±Ø¨: Ø§Ù„Ù†Ø¬Ù)', code:'NJF'}
    ];

    const IRAN_AIRPORTS = [
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø·Ù‡Ø±Ø§Ù† Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø®Ù…ÙŠÙ†ÙŠ', code:'IKA'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø·Ù‡Ø±Ø§Ù† Ù…Ù‡Ø±Ø¢Ø¨Ø§Ø¯', code:'THR'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ù…Ø´Ù‡Ø¯', code:'MHD'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø´ÙŠØ±Ø§Ø²', code:'SYZ'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'ØªØ¨Ø±ÙŠØ²', code:'TBZ'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø£ØµÙÙ‡Ø§Ù†', code:'IFN'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'ÙƒÙØ´', code:'KIH'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø¨Ù†Ø¯Ø± Ø¹Ø¨Ø§Ø³', code:'BND'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'ÙƒØ±Ù…Ù†Ø´Ø§Ù‡', code:'KSH'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø£Ù‡ÙˆØ§Ø²', code:'AWZ'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'ÙŠØ²Ø¯', code:'AZD'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'ÙƒØ±Ù…Ø§Ù†', code:'KER'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø²Ø§Ù‡Ø¯Ø§Ù†', code:'ZAH'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø±Ø´Øª', code:'RAS'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø³Ø§Ø±ÙŠ', code:'SRY'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø±Ø§Ù…Ø³Ø±', code:'RZR'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø¨ÙˆØ´Ù‡Ø±', code:'BUZ'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ù‚Ø´Ù…', code:'GSM'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø£ÙØ±ÙˆÙ…ÙŠØ©', code:'OMH'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø³Ù†Ù†Ø¯Ø¬', code:'SDG'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ù…Ø§Ù‡Ø´Ù‡Ø±', code:'MRX'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ù†ÙˆØ´Ù‡Ø±', code:'NSH'},
      {country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø¬Ø±Ø¬Ø§Ù†', code:'GBT'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ù„Ø§Ø±', code:'LRR'},{country:'Ø¥ÙŠØ±Ø§Ù†', city:'Ø¥ÙŠÙ„Ø§Ù…', code:'IIL'}
    ];

    const INTL_AIRPORTS = [
      {country:'ØªØ±ÙƒÙŠØ§', city:'Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©', code:'IST'},{country:'ØªØ±ÙƒÙŠØ§', city:'ØµØ¨ÙŠØ­Ø© ÙƒÙˆÙƒØ¬Ù†', code:'SAW'},
      {country:'ØªØ±ÙƒÙŠØ§', city:'Ø£Ù†Ø·Ø§Ù„ÙŠØ§', code:'AYT'},{country:'ØªØ±ÙƒÙŠØ§', city:'Ø·Ø±Ø§Ø¨Ø²ÙˆÙ†', code:'TZX'},
      {country:'ÙØ±Ù†Ø³Ø§', city:'Ø¨Ø§Ø±ÙŠØ³ Ø´Ø§Ø±Ù„ Ø¯ÙŠØºÙˆÙ„', code:'CDG'},{country:'Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©', city:'Ù„Ù†Ø¯Ù† Ù‡ÙŠØ«Ø±Ùˆ', code:'LHR'},
      {country:'Ø£Ù„Ù…Ø§Ù†ÙŠØ§', city:'ÙØ±Ø§Ù†ÙƒÙÙˆØ±Øª', code:'FRA'},{country:'Ù‡ÙˆÙ„Ù†Ø¯Ø§', city:'Ø£Ù…Ø³ØªØ±Ø¯Ø§Ù…', code:'AMS'},
      {country:'Ø³ÙˆÙŠØ³Ø±Ø§', city:'Ø²ÙŠÙˆØ±Ø®', code:'ZRH'},{country:'Ø¥ÙŠØ·Ø§Ù„ÙŠØ§', city:'Ø±ÙˆÙ…Ø§ ÙÙŠÙˆÙ…ÙŠØªØ´ÙŠÙ†Ùˆ', code:'FCO'},
      {country:'Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§', city:'Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©', code:'BCN'}
    ];

    const ALL_AIRPORTS = [...ARAB_AIRPORTS, ...IRAQ_AIRPORTS, ...IRAN_AIRPORTS, ...INTL_AIRPORTS];

    /************ 2) Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… + Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ø¨Ø­Ø« ************/
    function renderAirportSelect(selectEl, filterText=''){
      const txt = filterText.trim().toLowerCase();
      const byCountry = {};
      ALL_AIRPORTS.forEach(a=>{
        const label = `${a.country} â€” ${a.city} (${a.code})`.toLowerCase();
        if(!txt || label.includes(txt)){ (byCountry[a.country] ||= []).push(a); }
      });
      const countries = Object.keys(byCountry).sort((a,b)=>a.localeCompare(b,'ar'));
      selectEl.innerHTML = '';
      countries.forEach(country=>{
        const group = document.createElement('optgroup');
        group.label = country;
        byCountry[country].sort((a,b)=>a.city.localeCompare(b.city,'ar')).forEach(a=>{
          const opt = document.createElement('option');
          opt.value = a.code;
          opt.textContent = `${country} â€” ${a.city} (${a.code})`;
          group.appendChild(opt);
        });
        selectEl.appendChild(group);
      });
      if(!countries.length){
        const opt = document.createElement('option'); opt.textContent='Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©'; opt.disabled=true;
        selectEl.appendChild(opt);
      }
    }

    function setupSearch(filterInputId, selectId, defaultValue){
      const inp = document.getElementById(filterInputId);
      const sel = document.getElementById(selectId);
      renderAirportSelect(sel);
      inp.addEventListener('input', ()=>{
        const prev = sel.value;
        renderAirportSelect(sel, inp.value);
        if([...sel.querySelectorAll('option')].some(o=>o.value===prev)) sel.value = prev;
      });
      if(defaultValue){ sel.value = defaultValue; }
    }

    /************ 3) Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ************/
    const kayakCabin = c => ({economy:'e',business:'b',first:'f'}[c]||'e');
    const ymd = d => d || "";
    const ymdCompact = d => d ? d.replace(/-/g,'') : "";

    function buildURL(provider, mode, o, d, dep, ret, pax, cabin){
      const depYMD = ymd(dep), retYMD = ymd(ret);
      const depSC  = ymdCompact(dep), retSC = ymdCompact(ret);

      if(mode === 'multicity'){
        return provider==='skyscanner'
          ? 'https://www.skyscanner.net/transport/flights/multi-city/?locale=ar-SA'
          : 'https://www.kayak.ae/flights/multi-stop?lang=ar';
      }

      switch(provider){
        case 'skyscanner': {
          let base = `https://www.skyscanner.net/transport/flights/${o}/${d}`;
          if(depSC) base += `/${depSC}`;
          if(mode==='return' && retSC) base += `/${retSC}`;
          return `${base}/?adults=${encodeURIComponent(pax)}&cabinclass=${encodeURIComponent(cabin)}&locale=ar-SA`;
        }
        case 'kayak': {
          let base = `https://www.kayak.ae/flights/${o}-${d}`;
          if(depYMD) base += `/${depYMD}`;
          if(mode==='return' && retYMD) base += `/${retYMD}`;
          return `${base}?adults=${encodeURIComponent(pax)}&cabin=${encodeURIComponent(kayakCabin(cabin))}&lang=ar&sort=price_a`;
        }
        default: return '#';
      }
    }

    function openSelected(){
      const mode = document.querySelector('input[name="tripmode"]:checked').value;
      const o = document.getElementById('origin').value;
      const d = document.getElementById('destination').value;
      const p = document.getElementById('provider').value;
      const dep = document.getElementById('dep').value;
      const ret = document.getElementById('ret').value;
      const pax = document.getElementById('pax').value || 1;
      const cabin = document.getElementById('cabin').value;

      if(!o || !d){ alert('Ø§Ø®ØªØ±: Ù…Ù† / Ø¥Ù„Ù‰'); return; }
      if(mode!=='multicity' && !dep){ alert('Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„Ø°Ù‡Ø§Ø¨.'); return; }

      const url = buildURL(p, mode, o, d, dep, ret, pax, cabin);
      window.open(url,'_blank','noopener');
    }

    /************ 4) ÙˆØ§Ø¬Ù‡Ø© Ù†Ù…Ø· Ø§Ù„Ø±Ø­Ù„Ø©: ØªÙØ¹ÙŠÙ„ Ø²Ø± + Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹ÙˆØ¯Ø© ************/
    function handleModeUI(){
      const mode = document.querySelector('input[name="tripmode"]:checked').value;
      const retFld = document.getElementById('retFld');

      // Ø­Ø§Ù„Ø© Ø§Ù„Ø²Ø±Ø§Ø± (active)
      document.querySelectorAll('#tripModeGroup .chip').forEach(l=>l.classList.remove('active'));
      const checkedLabel = document.querySelector('#tripModeGroup input[name="tripmode"]:checked')?.closest('.chip');
      if(checkedLabel) checkedLabel.classList.add('active');

      // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹ÙˆØ¯Ø©
      if(mode==='oneway' || mode==='multicity'){
        retFld.classList.add('hid');
      }else{
        retFld.classList.remove('hid');
      }
    }
    document.addEventListener('change', (e)=>{
      if(e.target.name==='tripmode') handleModeUI();
    });

    /************ 5) Ù„ØºØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ù†Øµ ÙÙ‚Ø· EN/AR) ************/
    const STR = {
      ar: {
        title:'ØªØ°ÙƒØ±ØªÙƒ', tag:'Ø§Ø³ØªÙƒØ´Ù Ø£Ø±Ø®Øµ Ø£Ø³Ø¹Ø§Ø± ØªØ°Ø§ÙƒØ± Ø§Ù„Ø·ÙŠØ±Ø§Ù†',
        return:'Ø°Ù‡Ø§Ø¨ ÙˆØ¹ÙˆØ¯Ø©', oneway:'Ø°Ù‡Ø§Ø¨ ÙÙ‚Ø·', multicity:'ÙˆØ¬Ù‡Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©',
        from:'Ù…Ù†', to:'Ø¥Ù„Ù‰', depart:'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø°Ù‡Ø§Ø¨', returnDate:'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹ÙˆØ¯Ø©',
        pax:'Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§ÙØ±ÙŠÙ†', cabin:'Ø§Ù„Ø¯Ø±Ø¬Ø©', provider:'Ø§Ù„Ù…ÙˆÙ‚Ø¹', search:'Ø§Ø¨Ø­Ø« ğŸ”',
        langBtn:'EN'
      },
      en: {
        title:'Tathkirtak', tag:'Find the cheapest flight tickets',
        return:'Return', oneway:'One way', multicity:'Multi-city',
        from:'From', to:'To', depart:'Depart', returnDate:'Return',
        pax:'Passengers', cabin:'Cabin', provider:'Provider', search:'Search ğŸ”',
        langBtn:'AR'
      }
    };
    function applyLang(lang){
      document.documentElement.lang = (lang==='en'?'en':'ar');
      document.documentElement.dir  = (lang==='en'?'ltr':'rtl');
      const t = STR[lang];
      document.getElementById('siteTitle').textContent = t.title;
      document.getElementById('siteTag').textContent = t.tag;
      document.querySelector('[data-i18n="return"]').textContent = t.return;
      document.querySelector('[data-i18n="oneway"]').textContent = t.oneway;
      document.querySelector('[data-i18n="multicity"]').textContent = t.multicity;
      document.querySelector('[data-i18n="from"]').textContent = t.from;
      document.querySelector('[data-i18n="to"]').textContent = t.to;
      document.querySelector('[data-i18n="depart"]').textContent = t.depart;
      document.querySelector('[data-i18n="returnDate"]').textContent = t.returnDate;
      document.querySelector('[data-i18n="pax"]').textContent = t.pax;
      document.querySelector('[data-i18n="cabin"]').textContent = t.cabin;
      document.querySelector('[data-i18n="provider"]').textContent = t.provider;
      document.getElementById('searchBtn').textContent = t.search;
      document.getElementById('langBtn').textContent = t.langBtn;
    }
    document.getElementById('langBtn').addEventListener('click', ()=>{
      const cur = document.documentElement.lang==='en' ? 'en' : 'ar';
      const next = (cur==='ar' ? 'en' : 'ar');
      localStorage.setItem('tathkirtak_lang', next);
      applyLang(next);
    });

    /************ 6) ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© ************/
    (function init(){
      // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… + Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ø¨Ø­Ø«
      setupSearch('search-origin','origin','BAH');
      setupSearch('search-destination','destination','CAI');

      // ØªÙˆØ§Ø±ÙŠØ®: Ø§Ù„ÙŠÙˆÙ… + ØºØ¯Ù‹Ø§
      const now = new Date();
      const tomorrow = new Date(now); tomorrow.setDate(now.getDate()+1);
      const iso = d => d.toISOString().slice(0,10);
      document.getElementById('dep').value = iso(now);
      document.getElementById('ret').value = iso(tomorrow);

      document.getElementById('pax').value = 1;
      document.getElementById('cabin').value = 'economy';
      document.getElementById('provider').value = 'skyscanner';

      // Ù„ØºØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
      const saved = localStorage.getItem('tathkirtak_lang') || 'ar';
      applyLang(saved);

      // Ù…Ø¸Ù‡Ø± Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø­Ù„Ø© + Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¹ÙˆØ¯Ø©
      handleModeUI();
    })();
  </script>
</body>
</html>
