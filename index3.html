<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<title>مواقيت الصلاة وفق المذهب الجعفري | حسب موقعك</title>
<meta name="description" content="مواقيت الصلاة وفق المذهب الجعفري محسوبة بدقة مع عرض الحدث القادم والعدّاد الذكي والتاريخ الهجري.">
<link rel="canonical" href="">
<link rel="alternate" hreflang="ar" href="">

<!-- Open Graph / Twitter -->
<meta property="og:type" content="website">
<meta property="og:title" content="مواقيت الصلاة الجعفرية">
<meta property="og:description" content="مواقيت دقيقة، حدث قادم، عدّاد، وتاريخ هجري.">
<meta property="og:locale" content="ar_AR">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="مواقيت الصلاة الجعفرية">
<meta name="twitter:description" content="مواقيت دقيقة، حدث قادم، عدّاد، وتاريخ هجري.">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@600&family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"WebApplication",
  "name":"مواقيت الصلاة وفق المذهب الجعفري",
  "applicationCategory":"UtilitiesApplication",
  "operatingSystem":"Web",
  "inLanguage":"ar",
  "description":"مواقيت الصلاة وفق المذهب الجعفري مع حدث قادم وعدّاد وتاريخ هجري.",
  "url":""
}
</script>

<style>
  /* لوحة ألوان جديدة ناعمة وحديثة */
  :root{
    --ink:#0b1020;           /* نص أساسي */
    --muted:#7a8599;         /* نص ثانوي */
    --bg:#f6f7fb;            /* خلفية عامة */
    --card:#ffffff;          /* بطاقات */
    --border:#e7e9f1;        /* حدود خفيفة */
    --accent:#7c3aed;        /* بنفسجي أنيق */
    --accent-2:#06b6d4;      /* فيروزي ناعم */
    --glow: 0 10px 30px rgba(124,58,237,.15);
    --hadith:#0d2a58;
    --row-grad: linear-gradient(90deg,rgba(124,58,237,.12), rgba(6,182,212,.10) 60%, transparent);
  }
  @media (prefers-color-scheme: dark){
    :root{
      --ink:#e7e9f1; --muted:#aab3c7; --bg:#0a0f1a; --card:#0f1524; --border:#20283a;
      --glow:none; --hadith:#a7c0ff;
    }
    th{ background:#101a2e; }
  }

  *{box-sizing:border-box}
  body{
    margin:0; padding:18px; background:var(--bg);
    font-family:"Tajawal",system-ui,-apple-system,Segoe UI,Roboto,sans-serif; color:var(--ink);
  }
  .container{width:min(1100px,100%); margin:auto; display:flex; flex-direction:column; gap:18px}

  .hero{
    position:relative;
    background:var(--card); border:1px solid var(--border); border-radius:20px; box-shadow:var(--glow);
    padding:22px; text-align:center; overflow:hidden;
  }
  /* لمسة تدرّج خفيفة في العنوان */
  .hero::before{
    content:""; position:absolute; inset:-30% -20% auto auto; height:180px; width:60%;
    background: radial-gradient(closest-side, rgba(124,58,237,.18), rgba(6,182,212,.14) 60%, transparent);
    filter: blur(20px); pointer-events:none;
  }
  .heroTitle{margin:0; font-family:"Reem Kufi",sans-serif; font-size:1.75rem; letter-spacing:.2px}

  .locationBox{
    display:flex; justify-content:space-between; align-items:center; gap:10px;
    background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--glow); padding:14px;
  }
  .place{font-weight:900; font-size:1.08rem}
  .subPlace{font-size:.9rem; color:var(--muted)}

  .nextBox{
    background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--glow); padding:16px; display:grid; gap:10px
  }
  .nextTitle{font-weight:900; text-align:center; background:linear-gradient(90deg,var(--accent),var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent;}
  .nextRow{display:flex; justify-content:space-between; align-items:center; font-weight:800}
  .nextName{font-size:1.06rem}
  .nextAt{font-variant-numeric:tabular-nums}
  .countdown{display:flex; justify-content:center; gap:10px; font-weight:900; font-size:1.6rem; letter-spacing:.5px; direction:ltr}
  .cd-seg{min-width:2ch; text-align:center; padding:.28rem .68rem; border:1px solid var(--border); border-radius:12px; background:#f3f6ff}
  .cd-colon{opacity:.6}
  .note{font-size:.92rem; color:var(--muted); text-align:center}

  .infoRow{display:grid; grid-template-columns:1fr 1fr; gap:16px}
  @media(max-width:720px){.infoRow{grid-template-columns:1fr}}
  .chip{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--glow); padding:12px; display:flex; align-items:center; gap:12px}
  .ico{width:36px; height:36px; display:grid; place-items:center; border-radius:10px; background:linear-gradient(135deg, rgba(124,58,237,.15), rgba(6,182,212,.15)); font-size:1.2rem}
  .stack{display:flex; flex-direction:column}
  .label{font-size:.86rem; color:var(--muted); font-weight:800}
  .value{font-weight:900; font-size:1.02rem; font-variant-numeric:tabular-nums}

  .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--glow); padding:12px}
  .card h3{margin:0 0 10px; font-size:1.05rem; font-weight:900; text-align:center;}
  table{width:100%; border-collapse:collapse}
  th,td{padding:12px; border-bottom:1px solid #eef1f6; font-size:1rem}
  th{background:#fafbfe; font-weight:900}
  td.name{text-align:right; font-weight:800}
  td.time{text-align:left; font-weight:900}
  tr.next td{background:var(--row-grad)}

  .events{display:none; background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--glow); padding:14px}
  .events h3{margin:0 0 8px; font-size:1.02rem; font-weight:900; text-align:center;}
  .evtGrid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  @media(max-width:720px){.evtGrid{grid-template-columns:1fr}}
  .evtCol{border:1px dashed #e3e8f0; border-radius:12px; padding:10px}
  .evtCol h4{margin:0 0 6px; font-size:.95rem;}
  .evtItem{padding:6px 0; border-bottom:1px solid #f0f0f0}
  .evtItem:last-child{border-bottom:none}
  .evtText{font-weight:800}

  .hadith{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--glow); padding:16px; text-align:center}
  .htext{margin:0; font-size:1.08rem; color:var(--hadith); line-height:1.9}
  .hsrc{display:inline-block; margin-top:12px; padding:6px 14px; border-radius:12px; background:#f5f7fa; border:1px solid var(--border); font-weight:800; color:#3b4656}

  footer{text-align:center; margin-top:8px}
  .credit{color:var(--hadith); font-weight:800}
</style>
</head>
<body>
  <div class="container">
    <section class="hero" aria-labelledby="title">
      <h1 id="title" class="heroTitle">مواقيت الصلاة وفق المذهب الجعفري</h1>
    </section>

    <div class="locationBox" aria-live="polite">
      <div>
        <div class="place" id="place">—</div>
        <div class="subPlace" id="subPlace"></div>
      </div>
      <!-- تمت إزالة الأزرار حسب طلبك -->
    </div>

    <section class="nextBox" id="nextBox">
      <div class="nextTitle">الحدث القادم</div>
      <div class="nextRow">
        <span class="nextName" id="nextName">--</span>
        <span class="nextAt" id="nextAt">--:-- --</span>
      </div>
      <div class="countdown" aria-live="polite">
        <span class="cd-seg" id="cdH">00</span><span class="cd-colon">:</span>
        <span class="cd-seg" id="cdM">00</span><span class="cd-colon">:</span>
        <span class="cd-seg" id="cdS">00</span>
      </div>
      <div class="note" id="nextNote"></div>
    </section>

    <section class="infoRow" aria-label="التواريخ">
      <div class="chip">
        <div class="ico">🗓</div>
        <div class="stack"><div class="label">التاريخ الهجري</div><div class="value" id="hijri">--</div></div>
      </div>
      <div class="chip">
        <div class="ico">📅</div>
        <div class="stack"><div class="label">التاريخ الميلادي</div><div class="value" id="greg">--</div></div>
      </div>
    </section>

    <section class="card" aria-label="الجدول اليومي">
      <h3>الجدول اليومي</h3>
      <table>
        <thead><tr><th>الحدث</th><th>الوقت</th></tr></thead>
        <tbody id="times"><tr><td colspan="2">جاري التحميل…</td></tr></tbody>
      </table>
    </section>

    <section class="events" id="eventsBox">
      <h3>مناسبات اليوم</h3>
      <div class="evtGrid">
        <div class="evtCol" id="colToday"><h4>اليوم</h4><div id="eventsToday"></div></div>
        <div class="evtCol" id="colNight"><h4>الليلة</h4><div id="eventsTonight"></div></div>
      </div>
    </section>

    <section class="hadith" aria-label="حديث اليوم">
      <p class="htext" id="hadithText"></p>
      <div class="hsrc" id="hadithSource"></div>
    </section>

    <footer><span class="credit">برمجة وتطوير فاضل الريس</span></footer>
  </div>

<script>
/* ========================= SEO: canonical/alternate ========================= */
document.querySelector('link[rel="canonical"]').setAttribute('href', location.href.split('#')[0]);
document.querySelector('link[rel="alternate"]').setAttribute('href', location.href.split('#')[0]);

/* ========================= الحالة والتخزين ========================= */
const DEFAULT = { nameAr:"المنامة، البحرين", nameEn:"Manama, Bahrain", lat:26.2235, lon:50.5876, tz:"Asia/Bahrain" };
let state = JSON.parse(localStorage.getItem("pr_times_state")||"null") || {...DEFAULT};
let HIJRI_OFFSET_DAYS = Number(localStorage.getItem("pr_hijri_offset_days")||"0");
let lastTimings = null;
let cdTimer = null;

/* ========================= نصوص ثابتة ========================= */
const NAMES = {
  Imsak:"الإمساك", Fajr:"أذان الفجر", Sunrise:"الشروق",
  Dhuhr:"أذان الظهر", Asr:"أذان العصر", Sunset:"الغروب",
  Maghrib:"أذان المغرب", Isha:"أذان العشاء", Midnight:"منتصف الليل"
};
const HADITHS=[
  {t:"قال الإمام الباقر (عليه السلام): إذا استقبل المصلي القبلة استقبل الرحمن بوجهه لا إله غيره.",s:"المصدر: ميزان الحكمة"},
  {t:"قال الإمام علي (عليه السلام): إذا قام الرجل إلى الصلاة أقبل إبليس ينظر إليه حسداً لما يرى من رحمة الله التي تغشاه.",s:"المصدر: ميزان الحكمة"},
  {t:"قال الإمام الرضا (عليه السلام): الصلاة لها أربعة آلاف باب.",s:"المصدر: ميزان الحكمة"},
  {t:"قال الإمام علي (عليه السلام): يا كميل! ليس الشأن أن تصلي وتصوم وتتصدق، إنما الشأن أن تكون الصلاة فعلت بقلب نقي، وعمل عند الله مرضي، وخشوع سوي.",s:"المصدر: ميزان الحكمة"},
  {t:"قال رسول الله صلى الله عليه وآله: من ترك صلاته متعمداً فقد هدم دينه…",s:"المصدر: جامع الأخبار"},
  {t:"قال عبد الله بن مسعود: أيّ الأعمال أحب إلى الله؟ قال: الصلاة لوقتها.",s:"المصدر: الخصال"}
];
const HIJRI_MONTHS_AR=["","محرم","صفر","ربيع الأول","ربيع الآخر","جمادى الأولى","جمادى الآخرة","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة"];

/* ========================= أدوات وقت/تنسيق ========================= */
function to12h(raw){
  if(!raw) return "--:-- --";
  const pure=String(raw).replace(/\s*\(.*?\)\s*/g,"").trim();
  if(!/^\d{1,2}:\d{2}$/.test(pure)) return raw;
  let [H,M]=pure.split(":").map(Number);
  H = (H===24)?0:H;
  const h=H%12||12; return `${h}:${String(M).padStart(2,"0")} ${H<12?"AM":"PM"}`;
}
function ymdInTZ(date, tz){
  const p=new Intl.DateTimeFormat('en-CA',{timeZone:tz,year:'numeric',month:'2-digit',day:'2-digit'}).formatToParts(date);
  return {Y:p.find(x=>x.type==='year').value, M:p.find(x=>x.type==='month').value, D:p.find(x=>x.type==='day').value};
}

/* تحويلات هجري محلية + رياضيات اليوجوليان */
function hasIntlIslamic(){ try{ new Intl.DateTimeFormat('ar-SA-u-ca-islamic',{day:'numeric'}).format(new Date()); return true; }catch{ return false; } }
function g2jd(y,m,d){ const a=Math.floor((14-m)/12); y=y+4800-a; m=m+12+a* -12 -3; return d + Math.floor((153*m+2)/5) + 365*y + Math.floor(y/4) - Math.floor(y/100) + Math.floor(y/400) - 32045; }
function jd2islamic(jd){
  const l = jd - 1948440 + 10632;
  const n = Math.floor((l - 1) / 10631);
  let l2 = l - 10631*n + 354;
  const j = (Math.floor((10985 - l2)/5316)) * (Math.floor((50*l2)/17719)) + (Math.floor(l2/5670)) * (Math.floor((43*l2)/15238));
  l2 = l2 - (Math.floor((30 - j)/15)) * (Math.floor((17719*j)/50)) - (Math.floor(j/16)) * (Math.floor((15238*j)/43)) + 29;
  const m = Math.floor((24*l2)/709);
  const d = l2 - Math.floor((709*m)/24);
  const y = 30*n + j - 30;
  return {y,m,d};
}

/* مُطهّر لاستخراج HH:MM من أي صيغة */
function hmFromAny(s){
  if(!s) return "";
  const m = String(s).match(/(\d{1,2}):(\d{2})/);
  return m ? `${m[1].padStart(2,'0')}:${m[2]}` : "";
}

/* أحاديث */
(function setHadith(){
  const h=HADITHS[Math.floor(Math.random()*HADITHS.length)];
  hadithText.textContent=h.t; hadithSource.textContent=h.s;
})();

/* مناسبات مختصرة (يمكن التوسعة) */
const EVENTS={
  "1-10":[{t:"عاشوراء – شهادة الإمام الحسين ع"}],
  "2-20":[{t:"الأربعين – زيارة الإمام الحسين ع"}],
  "7-27":[{t:"المبعث النبوي"}],
  "10-1":[{t:"عيد الفطر المبارك"}],
  "12-10":[{t:"عيد الأضحى المبارك"}],
  "12-18":[{t:"عيد الغدير"}]
};
function drawEvents(todayM,todayD,nightM,nightD){
  const box=document.getElementById('eventsBox');
  const colToday=document.getElementById('colToday');
  const colNight=document.getElementById('colNight');
  const todayEl=document.getElementById('eventsToday');
  const nightEl=document.getElementById('eventsTonight');

  const todayList = EVENTS[`${todayM}-${todayD}`] || [];
  const nightList = EVENTS[`${nightM}-${nightD}`] || [];

  if(!todayList.length && !nightList.length){
    box.style.display='none'; todayEl.innerHTML=""; nightEl.innerHTML=""; return;
  }
  box.style.display='block';
  if(todayList.length){
    colToday.style.display='block';
    todayEl.innerHTML = todayList.map(e=>`<div class="evtItem"><span class="evtText">${e.t}</span></div>`).join("");
  }else{ colToday.style.display='none'; todayEl.innerHTML=""; }
  if(nightList.length){
    colNight.style.display='block';
    nightEl.innerHTML = nightList.map(e=>`<div class="evtItem"><span class="evtText">${e.t}</span></div>`).join("");
  }else{ colNight.style.display='none'; nightEl.innerHTML=""; }
}

/* ========================= جلب المواقيت (إحداثيات) ========================= */
/* بدون iso8601، حتى تعود الأوقات كـ HH:MM مباشرة */
async function fetchTimingsByCoords(lat,lon){
  const url=`https://api.aladhan.com/v1/timings?latitude=${encodeURIComponent(lat)}&longitude=${encodeURIComponent(lon)}&method=0&adjustment=${encodeURIComponent(HIJRI_OFFSET_DAYS||0)}`;
  const r=await fetch(url,{cache:"no-store"});
  if(!r.ok) throw new Error("تعذّر جلب المواقيت");
  const j=await r.json();
  const data=j?.data;
  if(!data?.timings) throw new Error("استجابة غير متوقعة");
  return data; // timings + date + meta.timezone
}

/* ======= حساب الحدث القادم والعدّاد ======= */
function nextKey(t, tz){
  const order=["Imsak","Fajr","Sunrise","Dhuhr","Asr","Sunset","Maghrib","Isha","Midnight"];
  const nowTZ=new Date(new Date().toLocaleString('en-US',{timeZone:tz}));
  const {Y,M,D}=ymdInTZ(nowTZ, tz);
  const cand=order.map(k=>{
    const hm = hmFromAny(t[k]);
    if(!/^\d{2}:\d{2}$/.test(hm)) return {k,diff:Infinity};
    let [HH,MM]=hm.split(':').map(Number); HH=(HH===24)?0:HH;
    return {k,diff:new Date(+Y,+M-1,+D,HH||0,MM||0,0)-nowTZ};
  });
  let n=cand.filter(x=>x.diff>=0).sort((a,b)=>a.diff-b.diff)[0];
  if(!n) n=cand.sort((a,b)=>Math.abs(a.diff)-Math.abs(b.diff))[0];
  return n?.k||null;
}
function dateForKeyToday(tz, timings, key){
  const nowTZ=new Date(new Date().toLocaleString('en-US',{timeZone:tz}));
  const {Y,M,D}=ymdInTZ(nowTZ, tz);
  const hm = hmFromAny(timings[key]);
  if(!/^\d{2}:\d{2}$/.test(hm)) return null;
  let [H,Min]=hm.split(':').map(Number); H=(H===24)?0:H;
  return new Date(+Y,+M-1,+D,H||0,Min||0,0);
}
function ensureImsak(t){
  if(!t.Imsak && t.Fajr){
    const pure=hmFromAny(t.Fajr);
    let [H,M]=pure.split(":").map(Number);
    const d=new Date(); d.setHours((H||0), (M||0)-10, 0, 0);
    t.Imsak = `${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`;
  }
  return t;
}
function setCD(ms){
  ms = Math.max(0, ms|0);
  let s = Math.floor(ms/1000);
  const h = Math.floor(s/3600); s%=3600;
  const m = Math.floor(s/60); s%=60;
  cdH.textContent = String(h).padStart(2,'0');
  cdM.textContent = String(m).padStart(2,'0');
  cdS.textContent = String(s).padStart(2,'0');
}
function tickCountdown(target,key){
  const tz = state.tz || Intl.DateTimeFormat().resolvedOptions().timeZone;
  const now=new Date(new Date().toLocaleString('en-US',{timeZone:tz}));
  const diff = target - now;
  setCD(diff);
  if(diff<=0){ clearInterval(cdTimer); load(); }
}

/* ========================= العرض الرئيسي ========================= */
async function render(data){
  if(data?.meta?.timezone) state.tz = data.meta.timezone;

  let t = ensureImsak({...data.timings});
  lastTimings = t;

  const rows=[
    {n:"الإمساك",k:"Imsak"},
    {n:"أذان الفجر",k:"Fajr"},
    {n:"الشروق",k:"Sunrise"},
    {n:"أذان الظهر",k:"Dhuhr"},
    {n:"أذان العصر",k:"Asr"},
    {n:"الغروب",k:"Sunset"},
    {n:"أذان المغرب",k:"Maghrib"},
    {n:"أذان العشاء",k:"Isha"},
    {n:"منتصف الليل",k:"Midnight"}
  ];

  const k=nextKey(t,state.tz);
  times.innerHTML=rows.map(r=>{
    const hm = hmFromAny(t[r.k]);
    return `<tr class="${r.k===k?'next':''}"><td class="name">${r.n}</td><td class="time">${to12h(hm)}</td></tr>`;
  }).join("");

  // صندوق الحدث القادم
  const target = k ? dateForKeyToday(state.tz, t, k) : null;
  const hmNext = k ? hmFromAny(t[k]) : "";
  nextName.textContent = NAMES[k] || (k||"--");
  nextAt.textContent = hmNext ? to12h(hmNext) : "--:-- --";
  nextNote.textContent = (k==="Sunrise" ? "زمن الشروق" : k==="Sunset" ? "وقت الغروب" : "الوقت المتبقي");
  if(cdTimer) clearInterval(cdTimer);
  if(target) { cdTimer = setInterval(()=>tickCountdown(target,k),1000); tickCountdown(target,k); }

  // التواريخ
  const nowTZ = new Date(new Date().toLocaleString('en-US',{timeZone:state.tz}));
  greg.textContent = new Intl.DateTimeFormat('ar',{timeZone:state.tz,weekday:'long',year:'numeric',month:'long',day:'numeric'}).format(nowTZ);

  // الهجري من الاستجابة (إن وُجد)
  try{
    const h = data?.date?.hijri;
    if(h){ 
      const wd = new Intl.DateTimeFormat('ar',{timeZone:state.tz,weekday:'long'}).format(nowTZ);
      hijri.textContent = formatHijriFromObj(h, wd);

      // مناسبات اليوم/الليلة
      const todayM = Number(h?.month?.number||0), todayD=Number(h?.day||0);
      const refTonight = new Date(nowTZ.getTime()+86400000);
      let h2 = h;
      try{
        const d2 = await fetch(`https://api.aladhan.com/v1/gToH?date=${encodeURIComponent(new Intl.DateTimeFormat('en-GB',{timeZone:state.tz,day:'2-digit',month:'2-digit',year:'numeric'}).format(refTonight).replace(/\//g,'-'))}&adjustment=${encodeURIComponent(HIJRI_OFFSET_DAYS||0)}`).then(x=>x.json());
        h2 = d2?.data?.hijri || h;
      }catch{}
      const nightM = Number(h2?.month?.number||0), nightD=Number(h2?.day||0);
      drawEvents(todayM,todayD,nightM,nightD);
    }else{ throw 0; }
  }catch{
    const civilWeekday = new Intl.DateTimeFormat('ar',{timeZone:state.tz,weekday:'long'}).format(nowTZ);
    try{
      const parts=new Intl.DateTimeFormat('en-TN-u-ca-islamic',{timeZone:state.tz,year:'numeric',month:'numeric',day:'numeric'}).formatToParts(nowTZ);
      const y=+parts.find(p=>p.type==='year').value, m=+parts.find(p=>p.type==='month').value, d=+parts.find(p=>p.type==='day').value;
      hijri.textContent = `${civilWeekday}، ${d} ${HIJRI_MONTHS_AR[m]} ${y} هـ`;
    }catch{
      const {Y,M,D}=ymdInTZ(nowTZ,state.tz);
      const h=jd2islamic(g2jd(+Y,+M,+D));
      hijri.textContent = `${civilWeekday}، ${h.d} ${HIJRI_MONTHS_AR[h.m]} ${h.y} هـ`;
    }
  }
}

/* ========================= النص الظاهر للمكان (بدون إحداثيات) ========================= */
function setPlaceTexts(){
  // لا نعرض الإحداثيات إطلاقًا
  const niceName = state.nameAr || state.nameEn || "الموقع المحدد";
  place.textContent = niceName.replace(/\(\s*[-\d.]+\s*,\s*[-\d.]+\s*\)/g,'').replace(/\s*،\s*$/,'');
  subPlace.textContent = state.tz ? `المنطقة الزمنية: ${state.tz}` : "";
}

/* ========================= تحميل أساسي ========================= */
async function load(){
  setPlaceTexts();
  hijri.textContent="--";
  greg.textContent="—";
  times.innerHTML="<tr><td colspan=2>...</td></tr>";
  try{
    const data=await fetchTimingsByCoords(state.lat,state.lon);
    await render(data);
  }catch(e){
    times.innerHTML=`<tr><td colspan="2" style="color:#b91c1c">تعذّر جلب المواقيت.</td></tr>`;
    document.getElementById('eventsBox').style.display='none';
  }
}
load();

/* ملاحظة: تمت إزالة كل ما يتعلق بزر "استخدم موقعي" وزر "تغيير الموقع" والبحث والساعة العلوية */
</script>
</body>
</html>
